<!DOCTYPE html>

<html dir="rtl" lang="ar">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <title>Login</title>
    <link
      rel="shortcut icon"
      href="../assets/img/UN_Habitat_Icon.svg"
      type="image/x-icon"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;500;700&amp;display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
      rel="stylesheet"
    />

    <style>
      body {
        margin: 0;
        padding: 0;
        font-family: "Inter", sans-serif;
        height: 100vh;
        display: flex;
        flex-direction: column;
        overflow: hidden;
      }

      body::before {
        content: "";
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-image: url("../assets/img/cover.jpg");
        background-size: cover;
        background-position: center;
        z-index: -1;
        filter: blur(3px);
      }

      #mainHeader {
        position: fixed;
        top: 0;
        width: 100%;
        z-index: 1000;
        background-color: #007bff;
        color: white;
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 4px 16px;
        height: 56px;
        min-height: 56px;
        box-sizing: border-box;
      }

      .header-logo {
        height: 40px;
        width: 40px;
        border-radius: 50%;
        border: 2px solid rgba(255, 255, 255, 0.7);
        object-fit: contain;
      }

      .header-title {
        flex: 1;
        text-align: center;
        font-weight: bold;
        font-size: 1.4rem;
        line-height: 1.4;
      }

      #mainFooter {
        position: fixed;
        bottom: 0;
        width: 100%;
        z-index: 1000;
        background-color: #3066ff;
        padding: 4px 16px;
        height: 56px;
        min-height: 56px;
        box-sizing: border-box;
        display: flex;
        align-items: center;
      }

      #scrollableContent {
        flex: 1;
        overflow-y: auto;
        margin-top: 56px;
        /* ارتفاع الهيدر */
        margin-bottom: 56px;
        /* ارتفاع الفوتر */
        padding: 20px;
      }

      .card {
        background: rgba(255, 255, 255, 0.9);
        border-radius: 16px;
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
        padding: 2rem;
        border-color: black;
        border-width: thick;
      }

      .nav-tabs .nav-link {
        font-weight: bold;
        color: #495057;
        border-radius: 12px 12px 0 0;
        border: none;
        background: #e3f2fd;
        margin-right: 5px;
        transition: all 0.3s ease;
      }

      .nav-tabs .nav-link.active {
        background: #0d6efd;
        color: white;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
      }

      .form-control,
      .btn {
        border-radius: 10px;
      }

      .header-logos {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 5px;
      }

      .header-logos img {
        height: 40px;
        width: 40px;
        object-fit: contain;
        border-radius: 50%;
        border: 2px solid rgba(255, 255, 255, 0.7);
      }

      .header-title {
        text-align: center;
        flex: 1;
      }

      .title-ar {
        font-size: 1.3rem;
        line-height: 1.2;
        font-weight: bold;
        white-space: normal;
      }

      .title-en {
        font-size: 0.95rem;
        line-height: 1.2;
        font-weight: bold;
        white-space: normal;
      }

      @media (max-width: 768px) {
        .title-en {
          display: none;
        }
      }

      .language-dropdown {
        position: relative;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .language-toggle {
        cursor: pointer;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.18);
        color: #fff;
        font-weight: bold;
        font-size: 1.1rem;
        border: 2px solid rgba(255, 255, 255, 0.7);
        outline: none;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        transition: background 0.2s, border 0.2s, box-shadow 0.2s;
      }

      .language-toggle:hover {
        background: rgba(255, 255, 255, 0.32);
        border-color: #fff;
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12);
        color: #007bff;
      }

      .language-flag {
        width: 24px;
        height: 24px;
        border-radius: 4px;
        object-fit: cover;
      }

      .password-wrapper {
        position: relative;
      }

      .toggle-password {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        left: 10px;
        background: none;
        border: none;
        cursor: pointer;
        color: #888;
        font-size: 1.2rem;
        z-index: 2;
      }

      .form-control.is-invalid {
        border-color: #dc3545;
        background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23dc3545'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e");
        background-repeat: no-repeat;
        background-position: right 0.75rem center;
        background-size: 16px 12px;
      }

      .invalid-feedback {
        display: none;
        color: #dc3545;
        font-size: 0.875em;
        margin-top: 0.25rem;
      }

      .form-control.is-invalid ~ .invalid-feedback {
        display: block;
      }

      .form-control.is-valid {
        border-color: #198754;
        background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'%3e%3cpath fill='%23198754' d='M2.3 6.73L.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1z'/%3e%3c/svg%3e");
        background-repeat: no-repeat;
        background-position: right 0.75rem center;
        background-size: 16px 12px;
      }

      .footer-content {
        max-width: 1200px;
        margin: 0 auto;
        width: 100%;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0 1rem;
        color: white;
      }

      .social-icon {
        color: #fff;
        font-size: 1.2rem;
        margin-left: 1rem;
        transition: color 0.3s ease;
      }

      .social-icon:hover {
        color: #3498db;
      }

      footer .copyright img {
        height: 40px;
        width: 40px;
        border-radius: 50%;
        border: 2px solid rgba(255, 255, 255, 0.7);
        background-color: white;
        padding: 2px;
        object-fit: contain;
        background-clip: content-box;
        vertical-align: middle;
        margin-right: 8px;
      }

      .footer-logo {
        height: 24px;
        margin-right: 8px;
        vertical-align: middle;
        display: inline-block !important;
      }

      .companyHITech {
        color: white !important;
        /* اللون الأبيض */
        text-decoration: none;
        /* إزالة الخط التحتي */
        transition: color 0.3s ease;
        /* تأثير انتقالي عند التحويم */
      }

      .companyHITech:hover {
        color: #f0f0f0 !important;
        /* لون فاتح قليلاً عند التحويم */
        text-decoration: underline;

        /* إضافة خط تحتي عند التحويم */
        .bg {
          /* The image used */
          background-image: url("../assets/img/cover.jpg");

          /* Full height */
          height: 100%;

          /* Center and scale the image nicely */
          background-position: center;
          background-repeat: no-repeat;
          background-size: cover;
        }
      }

      /* إضافة أنماط القائمة المنسدلة */
      .menu-dropdown {
        position: relative;
        display: inline-block;
      }

      .menu-toggle {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.18);
        color: #fff;
        border: 2px solid rgba(255, 255, 255, 0.7);
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
      }

      .menu-toggle:hover {
        background: rgba(255, 255, 255, 0.32);
        transform: scale(1.05);
      }

      .menu-dropdown-content {
        display: none;
        position: absolute;
        top: 100%;
        right: 0;
        background-color: white;
        min-width: 160px;
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
        border-radius: 8px;
        z-index: 1000;
        margin-top: 5px;
      }

      .menu-item {
        display: flex;
        align-items: center;
        padding: 12px 16px;
        text-decoration: none;
        color: #333;
        transition: background-color 0.3s ease;
      }

      .menu-item i {
        margin-left: 8px;
        width: 20px;
        text-align: center;
      }

      .menu-item:hover {
        background-color: #f5f5f5;
      }

      /* تعديلات للغة الإنجليزية */
      body[dir="ltr"] .menu-dropdown-content {
        right: auto;
        left: 0;
      }

      body[dir="ltr"] .menu-item i {
        margin-left: 0;
        margin-right: 8px;
      }
    </style>
  </head>

  <body>
    <!-- رأس الصفحة الثابت -->

    <header id="mainHeader">
      <div style="display: flex; align-items: center; gap: 10px">
        <!-- شعار يسار -->
        <img
          src="../assets/img/unhabitat.jfif"
          alt="Logo 3"
          class="header-logo"
        />

        <!-- اختيار اللغة -->
        <div class="language-dropdown">
          <button
            class="language-toggle"
            id="langToggleBtn"
            onclick="toggleLanguage()"
          >
            AR
          </button>
        </div>
        <!-- زر القائمة -->
        <div class="menu-dropdown">
          <button class="menu-toggle" id="menuToggleBtn" onclick="toggleMenu()">
            <i class="fas fa-ellipsis-v"></i>
          </button>
          <div class="menu-dropdown-content" id="menuDropdown">
            <a href="#" class="menu-item" id="settingsBtn">
              <i class="fas fa-cog"></i>
              <span id="settingsText">الإعدادات</span>
            </a>
            <a href="#" class="menu-item" id="logoutBtn" onclick="logout()">
              <i class="fas fa-sign-out-alt"></i>
              <span id="logoutText">تسجيل الخروج</span>
            </a>
          </div>
        </div>
      </div>

      <!-- العنوان في الوسط -->
      <div class="header-title text-center">
        <div class="title-ar">نظام إدارة المعلومات الحضرية _ مدينة حلب</div>
        <div class="title-en">
          Urban Information Management System - Aleppo City
        </div>
      </div>

      <!-- شعاران على اليمين -->
      <div class="header-logos right-logos">
        <img src="../assets/img/aleppo.jfif" alt="Logo 1" class="header-logo" />
        <img src="../assets/img/japan.png" alt="Logo 2" class="header-logo" />
      </div>
    </header>

    <div
      class="container d-flex justify-content-center align-items-center"
      style="height: 100%"
    >
      <div class="col-md-6">
        <div class="card" id="authCard">
          <div class="tab-content" id="tabsContent">
            <div class="tab-pane fade show active" id="signin" role="tabpanel">
              <form id="signinForm">
                <div class="mb-3">
                  <label class="form-label" for="emailInput" id="emailLabel1"
                    >البريد الإلكتروني</label
                  >
                  <input
                    class="form-control"
                    id="emailInput"
                    placeholder="example@email.com"
                    required=""
                    type="email"
                  />
                  <div class="invalid-feedback" id="emailFeedback"></div>
                </div>
                <div class="mb-3">
                  <label
                    class="form-label"
                    for="passwordInput"
                    id="passwordLabel1"
                    >كلمة المرور</label
                  >
                  <div class="password-wrapper">
                    <input
                      class="form-control"
                      id="passwordInput"
                      required=""
                      type="password"
                    />
                    <button
                      type="button"
                      class="toggle-password"
                      tabindex="-1"
                      onclick="togglePasswordVisibility()"
                    >
                      <i class="fa fa-eye" id="eyeIcon"></i>
                    </button>
                  </div>
                  <div class="invalid-feedback" id="passwordFeedback"></div>
                </div>
                <button
                  class="btn btn-primary w-100"
                  id="loginBtn"
                  type="submit"
                >
                  تسجيل الدخول
                </button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- الفوتر الثابت -->
    <footer id="mainFooter">
      <div class="footer-content">
        <div class="copyright">
          <span class="copyright-text">
            ©
            <script>
              document.write(new Date().getFullYear());
            </script>
            , جميع الحقوق محفوظة ,
            <a
              class="companyHITech"
              href="https://www.hi-techhouse.com"
              target="_blank"
              >دار التقنية الحديثة</a
            >
          </span>
          <img
            alt="Company Logo"
            src="../assets/img/HTH.png"
            class="footer-logo"
          />
        </div>
        <div class="social-icons">
          <a aria-label="Facebook" class="social-icon facebook" href="#"
            ><i class="fab fa-facebook-f"></i
          ></a>
          <a aria-label="Twitter" class="social-icon twitter" href="#"
            ><i class="fab fa-x-twitter"></i
          ></a>
          <a aria-label="Instagram" class="social-icon instagram" href="#"
            ><i class="fab fa-instagram"></i
          ></a>
          <a aria-label="LinkedIn" class="social-icon linkedin" href="#"
            ><i class="fab fa-linkedin-in"></i
          ></a>
          <a
            aria-label="WhatsApp"
            class="social-icon whatsapp"
            href="https://wa.me/966501234567"
            ><i class="fab fa-whatsapp"></i
          ></a>
        </div>
      </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      const translations = {
        ar: {
          dir: "rtl",
          signin: "تسجيل الدخول",
          title: "نظام الإدارة الحضرية لمدينة حلب",
          signup: "إنشاء حساب",
          email: "البريد الإلكتروني",
          password: "كلمة المرور",
          name: "الاسم الكامل",
          province: "المحافظة",
          area: "المنطقة",
          loginBtn: "تسجيل الدخول",
          registerBtn: "إنشاء الحساب",
          select: "اختر",
          footerRights: "جميع الحقوق محفوظة لصالح",
          emailRequired: "الرجاء إدخال البريد الإلكتروني",
          emailInvalid: "الرجاء إدخال بريد إلكتروني صحيح",
          passwordRequired: "الرجاء إدخال كلمة المرور",
          passwordLength: "كلمة المرور يجب أن تكون 6 أحرف على الأقل",
          loginError: "البريد الإلكتروني أو كلمة المرور غير صحيحة!",
          settingsText: "الإعدادات",
          logoutText: "تسجيل الخروج",
        },
        en: {
          dir: "ltr",
          signin: "Sign In",
          title: "Urban Management System for Aleppo",
          signup: "Sign Up",
          email: "Email",
          password: "Password",
          name: "Full Name",
          province: "Province",
          area: "Area",
          loginBtn: "Log In",
          registerBtn: "Register",
          select: "Select",
          footerRights: "All rights reserved to",
          emailRequired: "Please enter your email",
          emailInvalid: "Please enter a valid email",
          passwordRequired: "Please enter your password",
          passwordLength: "Password must be at least 6 characters",
          loginError: "Invalid email or password!",
          settingsText: "Settings",
          logoutText: "Logout",
        },
      };

      let currentLang = "ar";

      function switchLanguage(lang) {
        currentLang = lang;
        const t = translations[lang];

        document.documentElement.lang = lang;
        document.documentElement.dir = t.dir;

        // تحديث العنوان الرئيسي
        document.querySelector(".title-ar").style.display =
          lang === "ar" ? "block" : "none";
        document.querySelector(".title-en").style.display =
          lang === "en" ? "block" : "none";

        // تحديث نصوص الحقول والأزرار
        document.getElementById("signin-tab") &&
          (document.getElementById("signin-tab").textContent = t.signin);
        document.getElementById("emailLabel1").textContent = t.email;
        document.getElementById("passwordLabel1").textContent = t.password;
        document.getElementById("loginBtn").textContent = t.loginBtn;

        // تحديث نص الفوتر
        const companyName =
          lang === "ar" ? "دار التقنية الحديثة" : "Hi-Tech House";
        document.querySelector(
          ".copyright-text"
        ).innerHTML = `&copy; ${new Date().getFullYear()}, ${
          t.footerRights
        } <a href="https://www.hi-techhouse.com" target="_blank" style="color: white;">${companyName}</a>`;

        // تحديث نصوص القائمة عند تغيير اللغة
        document.getElementById("settingsText").textContent = t.settingsText;
        document.getElementById("logoutText").textContent = t.logoutText;
      }

      function toggleLanguage() {
        // Update the button text immediately for better UX
        const btn = document.getElementById("langToggleBtn");
        if (currentLang === "ar") {
          btn.textContent = "EN";
          switchLanguage("en");
        } else {
          btn.textContent = "AR";
          switchLanguage("ar");
        }
      }

      // Initial language
      switchLanguage("ar");
    </script>
    <script>
      const provincesData = {
        ar: {
          حلب: ["المدينة", "السفيرة", "اعزاز", "الباب"],
          دمشق: ["المزة", "العمارة", "باب توما"],
          حمص: ["الإنشاءات", "بابا عمرو", "الوعر"],
        },
        en: {
          Aleppo: ["City", "As-Safira", "Azaz", "Al-Bab"],
          Damascus: ["Mazzeh", "Al-Amara", "Bab Touma"],
          Homs: ["Inshaat", "Baba Amr", "Al-Waer"],
        },
      };
    </script>
    <script>
      // عند تحميل الصفحة
      document.addEventListener("DOMContentLoaded", function () {
        const form = document.getElementById("signinForm");
        const emailInput = document.getElementById("emailInput");
        const passwordInput = document.getElementById("passwordInput");
        const emailFeedback = document.getElementById("emailFeedback");
        const passwordFeedback = document.getElementById("passwordFeedback");

        function validateEmail(email) {
          const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
          return emailRegex.test(email);
        }

        function validatePassword(password) {
          return password.length >= 6;
        }

        function showError(input, feedback, message) {
          input.classList.remove("is-valid");
          input.classList.add("is-invalid");
          feedback.textContent = message;
        }

        function showSuccess(input, feedback) {
          input.classList.remove("is-invalid");
          input.classList.add("is-valid");
          feedback.textContent = "";
        }

        // إضافة التحقق من صحة البريد الإلكتروني
        emailInput.addEventListener("input", function () {
          const email = this.value.trim();

          if (!email) {
            showError(
              this,
              emailFeedback,
              translations[currentLang].emailRequired
            );
          } else if (!validateEmail(email)) {
            showError(
              this,
              emailFeedback,
              translations[currentLang].emailInvalid
            );
          } else {
            showSuccess(this, emailFeedback);
          }
        });

        // إضافة التحقق من صحة كلمة المرور
        passwordInput.addEventListener("input", function () {
          const password = this.value;

          if (!password) {
            showError(
              this,
              passwordFeedback,
              translations[currentLang].passwordRequired
            );
          } else if (!validatePassword(password)) {
            showError(
              this,
              passwordFeedback,
              translations[currentLang].passwordLength
            );
          } else {
            showSuccess(this, passwordFeedback);
          }
        });

        form.addEventListener("submit", function (event) {
          event.preventDefault();

          const email = emailInput.value.trim();
          const password = passwordInput.value;

          // التحقق من صحة الحقول
          let isValid = true;

          if (!email || !validateEmail(email)) {
            showError(
              emailInput,
              emailFeedback,
              translations[currentLang].emailInvalid
            );
            isValid = false;
          }

          if (!password || !validatePassword(password)) {
            showError(
              passwordInput,
              passwordFeedback,
              translations[currentLang].passwordLength
            );
            isValid = false;
          }

          if (!isValid) return;

          // مثال على بيانات المستخدمين
          const users = {
            admin: {
              email: "admin@example.com",
              password: "admin123",
              role: "admin",
            },
            user: {
              email: "user@example.com",
              password: "user123",
              role: "user",
            },
          };

          // التحقق من وجود المستخدم
          if (
            email === users.admin.email &&
            password === users.admin.password
          ) {
            window.location.href = "admin.html";
          } else if (
            email === users.user.email &&
            password === users.user.password
          ) {
            window.location.href = "user.html";
          } else {
            alert(translations[currentLang].loginError);
          }
        });
      });
    </script>
    <script>
      function togglePasswordVisibility() {
        const passwordInput = document.getElementById("passwordInput");
        const eyeIcon = document.getElementById("eyeIcon");
        if (passwordInput.type === "password") {
          passwordInput.type = "text";
          eyeIcon.classList.remove("fa-eye");
          eyeIcon.classList.add("fa-eye-slash");
        } else {
          passwordInput.type = "password";
          eyeIcon.classList.remove("fa-eye-slash");
          eyeIcon.classList.add("fa-eye");
        }
      }
    </script>
    <script>
      function toggleMenu() {
        const menu = document.getElementById("menuDropdown");
        menu.style.display = menu.style.display === "block" ? "none" : "block";
      }

      function logout() {
        window.location.href = "./index.html";
      }

      // إغلاق القائمة عند النقر خارجها
      document.addEventListener("click", function (e) {
        const menu = document.getElementById("menuDropdown");
        const menuBtn = document.getElementById("menuToggleBtn");

        if (menu && menuBtn) {
          if (!menuBtn.contains(e.target) && !menu.contains(e.target)) {
            menu.style.display = "none";
          }
        }
      });
    </script>
  </body>
</html>
